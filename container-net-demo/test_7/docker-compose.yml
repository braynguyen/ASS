# 'version' is obsolete in Compose V2 (docker compose) and can be omitted.

services:
  relay-node:
    # Build from the Dockerfile in the current directory
    build: .
    
    # Use 'init' to correctly handle signals (like Ctrl+C)
    init: true 
    
    # Pass the service name into the container
    environment:
      - SERVICE_NAME=relay-node
      
    # Connect the service to our custom network
    networks:
      - mesh-net

    # Mount the local './logs' folder into the container's '/app/logs'
    volumes:
      - ./logs:/app/logs

# Define the custom network
networks:
  mesh-net:
    driver: bridge
